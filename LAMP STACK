# Connecting to the EC2 Instance
ssh -i path/to/key.pem ubuntu@<your-public-ip>
ssh -i path/to/key.pem ubuntu@3.85.8.54

# Installing the LAMP Stack
# Update Package Repository
sudo apt update

# Install Apache
sudo apt install apache2

# Enable Apache to start on boot and check its status
sudo systemctl enable apache2
sudo systemctl status apache2

# Test the Apache installation (in a browser)
# http://<public-ip>

# Install MySQL
sudo apt install mysql-server
sudo mysql_secure_installation

# Install PHP
sudo apt install php libapache2-mod-php php-mysql

# Setting Up a Virtual Host
# Create Project Directory
sudo mkdir /var/www/projectlamp
sudo chown -R $USER:$USER /var/www/projectlamp

# Configure Virtual Host
sudo nano /etc/apache2/sites-available/projectlamp.conf

# Add the following content to the configuration file
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName projectlamp
    ServerAlias www.projectlamp
    DocumentRoot /var/www/projectlamp
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>

# Enable Virtual Host
sudo a2ensite projectlamp
sudo a2dissite 000-default
sudo systemctl reload apache2

# Testing the Setup
# Create an index.html file to verify your project setup
echo "<h1>This is Marychein</h1>" > /var/www/projectlamp/index.html

# Enabling PHP
# Update the directory index configuration
sudo nano /etc/apache2/mods-enabled/dir.conf

# Ensure index.php appears first
DirectoryIndex index.php index.html index.cgi index.pl index.xhtml index.htm

# Reload Apache
sudo systemctl reload apache2

# Create a simple PHP file for testing
echo "<?php phpinfo(); ?>" > /var/www/projectlamp/index.php
